# Meta Ad Analyzer - Plan Document

## Feature Information
- **Feature Name**: meta-ad-analyzer
- **Created**: 2026-02-09
- **Status**: Planning
- **Priority**: High
- **Owner**: Development Team
- **Version**: 1.1 (개선판)

---

## 1. Overview

### 1.1 배경 및 목적
Meta Ad Library 데이터를 기반으로 경쟁사 광고를 분석하고, AI를 활용하여 효과적인 광고 소재 제작 인사이트를 제공하는 SaaS 솔루션 개발

### 1.2 핵심 가치 제안
- 경쟁사 광고 트렌드를 데이터 기반으로 파악
- AI가 장기 게재 광고의 성공 패턴 자동 분석
- 업종별 맞춤 소재 레이아웃 및 카피 자동 생성
- 자사 광고 성과와 비교하여 지속적 개선

### 1.3 타겟 사용자

#### Primary Persona: 마케팅 에이전시 AE (Account Executive)
| 항목 | 내용 |
|------|------|
| **이름** | 김민수 (가상) |
| **역할** | 중소형 에이전시 AE, 3~5개 클라이언트 담당 |
| **Pain Point** | 매주 경쟁사 광고 수동 조사에 2-3시간 소요, 소재 기획 근거 부족 |
| **Goal** | 데이터 기반 소재 기획으로 클라이언트 설득력 향상 |
| **사용 시나리오** | 1) 경쟁사 광고 트렌드 조사 → 2) 인사이트 추출 → 3) 소재 기획안 제안 |

#### Secondary Personas
| 사용자 유형 | 설명 | 우선순위 |
|------------|------|----------|
| 디지털 마케팅 에이전시 | 중소형 에이전시 (Glitzy 등) | 1차 |
| 인하우스 마케팅 팀 | 기업 내부 마케팅 담당자 | 2차 |
| 프리랜서 마케터 | 광고 운영자, 마케터 | 3차 |

---

## 2. Scope Definition

### 2.1 개발 단계 전략

```
┌─────────────────────────────────────────────────────────────────┐
│  MVP (Week 1-4)          │  Core (Week 5-10)    │  Extended     │
│  ─────────────────────   │  ──────────────────  │  ───────────  │
│  • 광고 수집             │  • AI 소재 생성       │  • 성과 연동   │
│  • AI 분석               │  • 생성 UI           │  • A/B 추적    │
│  • 기본 갤러리 UI        │  • 인사이트 엔진      │  • 리포트 자동화│
│                          │                      │               │
│  [내부 검증용]           │  [베타 테스트]        │  [정식 런칭]   │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 MVP 범위 (Week 1-4) - 최소 기능 제품

> **MVP 목표**: Glitzy 내부에서 "경쟁사 광고 분석 → AI 인사이트 확인" 워크플로우 검증

| 기능 | 설명 | 우선순위 | 완료 기준 |
|------|------|----------|----------|
| 광고 수집 시스템 | Meta Ad Library API 연동, 입시학원 업종 한정 | P0 | 100개 광고 수집 성공 |
| AI 이미지 분석 | Claude Vision 기반 색상/레이아웃/구성요소 분석 | P0 | 분석 결과 JSON 저장 |
| AI 카피 분석 | Claude 기반 텍스트 구조/톤 분석 (GPT 미사용) | P0 | 분석 결과 JSON 저장 |
| 광고 갤러리 UI | 기본 그리드 뷰 + 상세 분석 모달 | P0 | 필터 1개 (게재기간) |

**MVP에서 제외** (Core로 이동):
- 트렌드 차트/대시보드
- 베스트 프랙티스 페이지
- 복잡한 필터링

### 2.3 Core 범위 (Week 5-10) - 핵심 기능 완성

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 트렌드 분석 대시보드 | 색상/카피/레이아웃 트렌드 차트 | P1 |
| 베스트 프랙티스 | 장기 게재 광고 TOP 20 + 성공 요인 분석 | P1 |
| 인사이트 도출 엔진 | 장기 게재 광고 패턴 자동 추출 | P0 |
| 소재 생성 엔진 | 3가지 전략 버전 자동 생성 | P0 |
| 소재 추천 UI | 생성 폼, 결과 화면, 편집/다운로드 | P0 |
| 다중 필터링 | 업종/지역/기간/플랫폼 복합 필터 | P1 |

### 2.4 Extended 범위 (Week 11+) - 확장 기능

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| Meta Marketing API 연동 | 자사 광고 계정 연동, 실시간 성과 수집 | P1 |
| 비교 분석 대시보드 | 자사 vs 업종 평균 성과 비교 | P1 |
| A/B 테스트 추적 | 버전별 성과 비교, 승리 패턴 학습 | P2 |
| 정기 리포트 자동 생성 | 주간/월간 트렌드 리포트 | P2 |
| 업종 확장 | 의료/뷰티, 어학원, 직업학원 등 | P2 |
| 사용자 인증 시스템 | 회원가입, 로그인, 구독 관리 | P1 |

### 2.5 Out-of-Scope (제외 범위)
- Google Ads, Naver 등 타 플랫폼 지원 (중기 목표)
- 랜딩 페이지 분석 및 최적화 (중기 목표)
- 글로벌 시장 진출 (장기 목표)
- 자체 크리에이티브 생성 AI 개발 (장기 목표)
- 동영상 광고 분석 (장기 목표)

---

## 3. Technical Architecture

### 3.1 기술 스택

```
┌─────────────────────────────────────────────────────────────┐
│                    FRONTEND                                  │
│  Next.js 14 (App Router) + TailwindCSS + shadcn/ui          │
│  State: Zustand | Charts: Recharts                          │
└─────────────────────────────────────────────────────────────┘
                              ↕
┌─────────────────────────────────────────────────────────────┐
│                    BACKEND                                   │
│  Python 3.11+ | FastAPI | Celery + Redis (Queue)            │
└─────────────────────────────────────────────────────────────┘
                              ↕
┌─────────────────────────────────────────────────────────────┐
│                    AI SERVICES (단일화)                      │
│  Claude 3.5 Sonnet - 이미지 분석 (Vision)                   │
│  Claude 3.5 Sonnet - 카피 분석/생성                         │
│  Claude 3.5 Sonnet - 인사이트 종합                          │
└─────────────────────────────────────────────────────────────┘
                              ↕
┌─────────────────────────────────────────────────────────────┐
│                    DATA LAYER                                │
│  PostgreSQL 15 | Redis 7 | AWS S3                           │
└─────────────────────────────────────────────────────────────┘
```

> **AI 서비스 단일화 결정 근거**:
> - Claude 3.5 Sonnet이 Vision + Text 모두 지원
> - 단일 API로 관리 복잡성 감소, 비용 예측 용이
> - 필요 시 GPT-4o 추가 가능 (확장성 유지)

### 3.2 시스템 구조

```
┌─────────────────────────────────────────────────────────────┐
│                      Frontend (Next.js)                      │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐       │
│  │ 광고 탐색기   │  │ 트렌드 분석   │  │ 소재 생성기   │       │
│  └──────────────┘  └──────────────┘  └──────────────┘       │
└─────────────────────────────────────────────────────────────┘
                              ↕
┌─────────────────────────────────────────────────────────────┐
│                    API Layer (FastAPI)                       │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐       │
│  │ Ad Collection│  │ Analysis API │  │ Generation   │       │
│  │ Endpoints    │  │              │  │ Endpoints    │       │
│  └──────────────┘  └──────────────┘  └──────────────┘       │
└─────────────────────────────────────────────────────────────┘
                              ↕
┌─────────────────────────────────────────────────────────────┐
│                    Processing Layer                          │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐       │
│  │ Meta API     │  │ Image        │  │ AI Analysis  │       │
│  │ Collector    │  │ Processor    │  │ Engine       │       │
│  └──────────────┘  └──────────────┘  └──────────────┘       │
└─────────────────────────────────────────────────────────────┘
                              ↕
┌─────────────────────────────────────────────────────────────┐
│                    Data Layer                                │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐       │
│  │ PostgreSQL   │  │ Redis        │  │ S3           │       │
│  │ (Metadata)   │  │ (Cache/Queue)│  │ (Images)     │       │
│  └──────────────┘  └──────────────┘  └──────────────┘       │
└─────────────────────────────────────────────────────────────┘
```

### 3.3 핵심 데이터 모델

#### 광고 원본 데이터 (ads_raw)
```
- ad_id: 광고 고유 ID
- page_name/page_id: 광고주 정보
- ad_creative_body: 광고 본문
- ad_snapshot_url: 스냅샷 URL
- start_date/stop_date/duration_days: 게재 기간
- platforms: 게재 플랫폼 (Facebook, Instagram)
- industry/region: 업종/지역
- image_s3_path: S3 이미지 경로
```

#### 이미지 분석 결과 (ads_analysis_image)
```
- composition: 구성요소 (인물, 텍스트 비율, 차트, 로고 위치)
- colors: 색상 팔레트 (primary, secondary, tone, saturation)
- layout: 레이아웃 유형 (상하분할, 좌우분할, 중앙집중)
- emotion: 분위기, 강조 요소
```

#### 카피 분석 결과 (ads_analysis_copy)
```
- copy_structure: 헤드라인, 본문, CTA, 핵심 메시지
- numbers: 숫자 정보 (값, 단위, 맥락)
- offer: 제안 유형 (할인, 무료혜택, 사회적 증거, 긴급성)
- tone: 격식, 감정, 스타일
- keywords: 주요 키워드
```

---

## 4. Development Phases

### Phase 1: MVP (Week 1-4) - 내부 검증용

> **목표**: Glitzy 내부에서 "광고 수집 → AI 분석 → 결과 확인" 플로우 검증

#### Week 1-2: 인프라 + 수집
- [ ] 프로젝트 셋업 (모노레포 구조, 환경 설정)
- [ ] Docker 개발 환경 구축 (docker-compose)
- [ ] PostgreSQL + Redis 셋업
- [ ] FastAPI 기본 구조
- [ ] Meta Ad Library API 연동
- [ ] 광고 수집 스크립트 (입시학원 한정, 100개 목표)
- [ ] 이미지 다운로드 및 S3 저장

#### Week 3-4: AI 분석 + 기본 UI
- [ ] Claude Vision API 연동 (이미지 분석)
- [ ] Claude 카피 분석 파이프라인
- [ ] 분석 결과 저장 및 조회 API
- [ ] Next.js 프로젝트 초기화
- [ ] 광고 갤러리 UI (기본 그리드 + 상세 모달)
- [ ] 게재기간 필터 (1개)

**MVP 완료 기준 (Week 4 체크포인트)**:
- [ ] 입시학원 광고 100개 수집 완료
- [ ] AI 분석 결과 80% 이상 정확도 (내부 평가)
- [ ] 기본 UI에서 광고 조회 및 분석 결과 확인 가능

---

### Phase 2: Core (Week 5-10) - 베타 테스트용

> **목표**: 외부 베타 테스터(지인 에이전시 5곳)에게 제공 가능한 수준

#### Week 5-6: 대시보드 고도화
- [ ] 트렌드 분석 차트 (색상, 카피, 레이아웃)
- [ ] 베스트 프랙티스 페이지
- [ ] 다중 필터링 (업종/지역/기간/플랫폼)
- [ ] 검색 기능

#### Week 7-8: 인사이트 + 소재 생성 엔진
- [ ] 패턴 분석 로직 구현
- [ ] 인사이트 생성 및 캐싱
- [ ] 전략 생성 로직 (3가지 버전)
- [ ] 카피 생성 (Claude)
- [ ] "선택 이유" 생성 (Claude)
- [ ] 목업 렌더링 (HTML/CSS → Image)

#### Week 9-10: 소재 생성 UI + 업종 확장
- [ ] 소재 생성 입력 폼
- [ ] 3버전 결과 화면
- [ ] 편집 기능
- [ ] 다운로드 기능 (PNG)
- [ ] 의료/뷰티 업종 추가

**Core 완료 기준 (Week 10 체크포인트)**:
- [ ] 5개 에이전시 베타 테스트 시작
- [ ] 소재 생성 → 다운로드 플로우 완료율 70%+
- [ ] 사용자 피드백 수집 시작

---

### Phase 3: Extended (Week 11+) - 정식 런칭용

> **목표**: SaaS 정식 서비스 런칭

#### Week 11-12: 성과 연동
- [ ] Meta Marketing API 연동
- [ ] 자사 광고 데이터 수집
- [ ] 성과 비교 대시보드
- [ ] A/B 테스트 추적

#### Week 13-14: 사용자 시스템 + 최적화
- [ ] 사용자 인증 시스템 (회원가입, 로그인)
- [ ] 구독 관리 (Plan별 기능 제한)
- [ ] 성능 최적화 (캐싱, 쿼리 최적화)
- [ ] 버그 수정

#### Week 15-16: 배포 및 런칭
- [ ] 프로덕션 환경 구축 (AWS/GCP)
- [ ] CI/CD 파이프라인 (GitHub Actions)
- [ ] 모니터링 설정 (Sentry)
- [ ] 정식 런칭 및 온보딩

---

## 5. API Endpoints Summary

### 광고 수집 API
```
POST /api/v1/ads/collect
  - 광고 수집 작업 시작
  - Body: { keywords, country, industry, limit }
  - Response: { job_id, status, estimated_time }

GET /api/v1/ads/collect/{job_id}
  - 수집 작업 상태 조회
  - Response: { status, progress, collected_count, errors }

GET /api/v1/ads/list
  - 광고 목록 조회 (필터링, 페이지네이션)
  - Query: industry, region, min_duration, start_date, end_date

GET /api/v1/ads/{ad_id}
  - 광고 상세 조회 (분석 결과 포함)
```

### 분석 API
```
POST /api/v1/analysis/image/{ad_id}
  - 이미지 분석 요청

POST /api/v1/analysis/copy/{ad_id}
  - 카피 분석 요청

GET /api/v1/trends
  - 트렌드 데이터 조회
  - Query: industry, region, period

GET /api/v1/insights
  - 인사이트 조회
  - Query: industry, region, min_duration
```

### 소재 생성 API
```
POST /api/v1/creatives/generate
  - 소재 생성 요청
  - Body: { business_name, region, target, emphasis, promotion }
  - Response: { versions: [{strategy, layout, colors, copy, reasoning, mockup_url}] }

GET /api/v1/creatives/{id}
  - 생성된 소재 상세 조회

PUT /api/v1/creatives/{id}/edit
  - 소재 수정

POST /api/v1/creatives/{id}/export
  - 소재 다운로드
  - Body: { format: 'png' | 'psd' | 'pdf' }
```

---

## 6. Success Metrics (KPI)

### 제품 지표
| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| MAU | 50명 (6개월) | 월간 로그인 사용자 수 |
| 구독 유지율 | 85%+ | 월간 갱신율 |
| 소재 생성 완료율 | 70%+ | 생성 시작 → 다운로드 비율 |
| 사용자당 월 소재 생성 수 | 15개 | 평균 생성 횟수 |

### 비즈니스 지표
| 지표 | 목표 | 기간 |
|------|------|------|
| MRR | ₩5,000,000 | 12개월 |
| CAC | ₩300,000 이하 | - |
| LTV | ₩3,600,000+ | - |
| LTV/CAC | 12:1 | - |

### 품질 지표
| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| AI 분석 정확도 | 90%+ | 사람 평가 기준 |
| 소재 생성 만족도 | 4.5/5.0 | 사용자 피드백 |
| 시스템 응답 시간 | < 3초 | 소재 생성 완료 시간 |
| API 가용성 | 99.9% | 업타임 모니터링 |

---

## 7. Risks & Mitigations

| 리스크 | 영향도 | 발생확률 | 대응 방안 |
|--------|--------|----------|----------|
| Meta API 정책 변경 | High | Medium | Selenium 백업 수집기 준비, API 변경 모니터링 |
| AI API 비용 초과 | Medium | High | 캐싱 적극 활용, 배치 처리, 사용량 제한, 예산 알림 설정 |
| 분석 정확도 부족 | Medium | Medium | 지속적 프롬프트 튜닝, 사용자 피드백 반영, MVP에서 조기 검증 |
| 경쟁 서비스 출현 | Medium | Low | 한국 시장 특화, 소재 생성까지 원스톱 차별화 |
| MVP 검증 실패 | High | Medium | Week 4 체크포인트에서 조기 피벗 결정, 핵심 기능 우선 검증 |

### AI 비용 예측 (Claude API)

| 단계 | 예상 호출량/월 | 예상 비용/월 |
|------|---------------|-------------|
| MVP | 이미지 500건 + 카피 500건 | ~$50 |
| Core | 이미지 2,000건 + 카피 2,000건 + 생성 500건 | ~$200 |
| Extended | 이미지 5,000건 + 카피 5,000건 + 생성 2,000건 | ~$500 |

---

## 8. Dependencies

### 외부 서비스
- Meta Ad Library API
- Meta Marketing API
- OpenAI GPT-4o API
- Anthropic Claude API
- AWS S3

### 인프라
- PostgreSQL 15
- Redis 7
- Docker / Docker Compose
- AWS / GCP

---

## 9. Approval

| 역할 | 이름 | 서명 | 날짜 |
|------|------|------|------|
| Product Owner | - | - | - |
| Tech Lead | - | - | - |
| Designer | - | - | - |

---

## 10. References

- [META_AD_ANALYZER_SPEC.md](../META_AD_ANALYZER_SPEC.md) - 원본 기획서
- Meta Ad Library API 문서
- OpenAI API 문서
- Anthropic Claude API 문서

---

## Changelog

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 1.0 | 2026-02-09 | 초기 Plan 문서 작성 | Claude |
| 1.1 | 2026-02-09 | MVP 범위 축소 (4주), AI 단일화(Claude), 페르소나 추가, Phase 순서 정리, 비용 예측 추가 | Claude |
